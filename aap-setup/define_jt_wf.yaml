---
- name: define job templates
  ansible.controller.job_template:
    organization: "{{ item.organization | default(default.jt.organization) }}"
    state: "{{ item.state | default(default.jt.state)| default(omit) }}"
    forks: "{{ item.forks | default(default.jt.forks)| default(omit) }}"
    job_type: "{{ item.job_type | default(default.jt.job_type)| default(omit) }}"
    execution_environment: "{{ item.execution_environment | default(default.jt.execution_environment)| default(omit) }}"
    ask_limit_on_launch: "{{ item.ask_limit_on_launch | default(default.jt.ask_limit_on_launch)| default(omit) }}"
    become_enabled: "{{ item.become_enabled | default(default.jt.become_enabled)| default(omit) }}"
    inventory: "{{ item.inventory | default(default.jt.inventory) }}"
    project: "{{ item.project | default(default.jt.project) }}"
    name: "{{ item.name }}"
    description: "{{ item.description | default(omit) }}"
    survey_enabled: "{{ item.survey_enabled | default(omit) }}"
    survey_spec: "{{ item.survey_spec | default(omit) }}"
    limit: "{{ item.limit | default(omit) }}"
    playbook: "{{ item.playbook }}"
    credentials: "{{ item.credentials | default(omit) }}"
    extra_vars: "{{ item.extra_vars | default(omit) }}"
  loop: "{{ jt}}"

- name: define workflow job template
  ansible.controller.workflow_job_template:
    name: "{{ item.name }}"
    organization: "{{ item.organization | default(default.wf.organization) }}"
    state: "{{ item.state | default(default.wf.state) | default(omit)}}"
    workflow_nodes: "{{ item.workflow_nodes }}"
  loop: "{{ wf }}"
