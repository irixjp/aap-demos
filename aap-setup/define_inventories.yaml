---
- name: define inventories {{ lp_inv.inv.name }}
  ansible.controller.inventory:
    name: "{{ item.inv.name }}"
    description: "{{ item.inv.description | default(omit) }}"
    organization: "{{ item.inv.organization | default(inventories.default.inv.organization) }}"
    state: "{{ item.inv.state | default(inventories.default.inv.state) }}"
  when: lp_inv.inv is define

- name: define hosts {{ item.name  }}
  ansible.controller.inventory_source:
    name: "{{ item.name }}"
    description: "{{ item.description | default(omit) }}"
    variables: "{{ item.variables | default(omit) }}"
  loop: "{{ lp_inv.hosts }}"
  when: lp_inv.hosts is define


#      ansible.controller.inventory_source:
#        name: "{{ item.inv.name }}_source"
#        description: "{{ item.src.description | default('') }}"
#        inventory: "{{ item.inv.name }}"
#        source_path: "{{ item.src.source_path }}"
#        state: "{{ item.src.state | default(default.src.state) }}"
#        overwrite: "{{ item.src.overwrite | default(default.src.overwrite) }}"
#        overwrite_vars: "{{ item.src.overwrite_vars | default(default.src.overwrite_vars) }}"
#        update_on_launch: "{{ item.src.update_on_launch | default(default.src.update_on_launch) }}"
#        source: "{{ item.src.source | default(default.src.source) }}"
#        source_project: "{{ item.src.source_project | default(default.src.source_project) }}"
